[gd_scene load_steps=9 format=3 uid="uid://j3m1lwvl5jua"]

[ext_resource type="Script" uid="uid://dbqotkyisa84w" path="res://Player/player.gd" id="1_l8h54"]
[ext_resource type="Script" uid="uid://cr4eajbcbd2hw" path="res://Player/smooth_camera_arm.gd" id="2_4ntmi"]
[ext_resource type="PackedScene" uid="uid://c6pdm8b840545" path="res://Player/health_component.tscn" id="2_k53q1"]
[ext_resource type="PackedScene" uid="uid://dhnqhg7al0gbr" path="res://Player/rig.tscn" id="3_btcbx"]
[ext_resource type="Script" uid="uid://c18p0xs4w5brd" path="res://Player/attack_cast.gd" id="4_gwnis"]
[ext_resource type="PackedScene" uid="uid://c43n45klq0hda" path="res://Player/area_attack.tscn" id="6_fhl08"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_hvfyp"]

[sub_resource type="SeparationRayShape3D" id="SeparationRayShape3D_l8h54"]

[node name="Player" type="CharacterBody3D"]
collision_layer = 5
script = ExtResource("1_l8h54")

[node name="HealthComponent" parent="." instance=ExtResource("2_k53q1")]

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
shape = SubResource("CapsuleShape3D_hvfyp")

[node name="SmoothCameraArm" type="SpringArm3D" parent="." node_paths=PackedStringArray("target")]
transform = Transform3D(1, 0, 0, 0, 0.90630776, 0.42261827, 0, -0.42261827, 0.90630776, 0, 0, 0)
shape = SubResource("SeparationRayShape3D_l8h54")
spring_length = 4.0
script = ExtResource("2_4ntmi")
target = NodePath("../HorizontalPivot/VerticalPivot")

[node name="Camera3D" type="Camera3D" parent="SmoothCameraArm"]

[node name="HorizontalPivot" type="Node3D" parent="."]

[node name="VerticalPivot" type="Node3D" parent="HorizontalPivot"]

[node name="RigPivot" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -1, 0)

[node name="Rig" parent="RigPivot" instance=ExtResource("3_btcbx")]

[node name="Skeleton3D" parent="RigPivot/Rig/CharacterRig/GameRig" index="0"]
bones/0/position = Vector3(4.440892e-15, 0.9094669, -0.048173573)
bones/2/rotation = Quaternion(0.006119998, -0.00028704348, 0.0032114785, 0.9999761)
bones/3/rotation = Quaternion(-0.089258246, -0.00028599895, 0.00852446, 0.99597204)
bones/4/rotation = Quaternion(0.27052635, 1.4434923e-08, 9.182759e-08, 0.96271265)
bones/6/rotation = Quaternion(-0.16438691, -1.1758763e-07, -1.959643e-08, 0.986396)
bones/7/position = Vector3(-2.7629127e-08, 0.9094668, -0.04817347)
bones/8/position = Vector3(-7.980439e-08, 0.90946686, -0.048173524)
bones/9/position = Vector3(0.13114367, 0.9756712, -0.035129093)
bones/9/rotation = Quaternion(0.99418473, 0.020280683, -0.03123228, 0.10104462)
bones/11/rotation = Quaternion(0.39636812, -0.00069554197, 0.00030041486, 0.9180914)
bones/13/rotation = Quaternion(-0.74136025, 0.011847663, 0.024362653, 0.6705603)
bones/15/position = Vector3(-0.1311437, 0.9756711, -0.0351291)
bones/15/rotation = Quaternion(0.9756731, -0.0053062756, 0.027652299, 0.21741517)
bones/17/rotation = Quaternion(0.4224359, 0.0031625463, -0.0014740579, 0.90638614)
bones/19/rotation = Quaternion(-0.6786932, -0.028141463, -0.0014077842, 0.7338813)
bones/21/position = Vector3(0.025128614, 1.4390424, 0.046911515)
bones/21/rotation = Quaternion(-0.4718116, -0.26672864, -0.41579062, 0.7303204)
bones/22/position = Vector3(0.1912917, 1.4778336, -0.010765903)
bones/22/rotation = Quaternion(0.022940584, -0.16377017, 0.97544664, -0.14545475)
bones/23/rotation = Quaternion(6.457196e-08, -0.037807286, 3.588548e-08, 0.99928504)
bones/24/rotation = Quaternion(0.34858856, -0.037807878, -0.021763273, 0.9362601)
bones/46/position = Vector3(-0.011363527, 1.4390424, 0.0469115)
bones/46/rotation = Quaternion(-0.47341618, 0.26176655, 0.41292506, 0.7326994)
bones/47/position = Vector3(-0.17676434, 1.4780838, -0.012749778)
bones/47/rotation = Quaternion(-0.014815315, -0.14703271, 0.9760007, 0.15995179)
bones/48/rotation = Quaternion(1.0764449e-07, 0.05439566, 1.3487353e-07, 0.9985195)
bones/49/rotation = Quaternion(0.38880888, 0.05439613, 0.028059822, 0.91928315)
bones/71/position = Vector3(0.12719111, 1.3598825, -0.02457315)
bones/71/rotation = Quaternion(2.0245182e-08, 0.59935164, 0.8004858, -4.5891912e-08)
bones/72/position = Vector3(-0.113425955, 1.3598825, -0.024573175)
bones/72/rotation = Quaternion(2.0245235e-08, 0.59935164, 0.8004858, -4.589184e-08)

[node name="RightHandBone" parent="RigPivot/Rig" index="2"]
transform = Transform3D(-0.96234345, -0.27079985, -0.023715872, 0.22262014, -0.83517194, 0.50291985, -0.15599744, 0.47870216, 0.86400723, -0.35058042, 1.0105746, 0.026167616)

[node name="LeftHandBone" parent="RigPivot/Rig" index="3"]
transform = Transform3D(-0.9705136, 0.23910746, 0.03052162, -0.2096764, -0.8998735, 0.38244432, 0.118910916, 0.36476767, 0.92347413, 0.348102, 0.9935703, -0.009896334)

[node name="RayAttachment" type="BoneAttachment3D" parent="RigPivot/Rig"]
transform = Transform3D(-0.96234345, -0.27079985, -0.023715872, 0.22262014, -0.83517194, 0.50291985, -0.15599744, 0.47870216, 0.86400723, -0.35058042, 1.0105746, 0.026167616)
bone_name = "DEF-hand.R"
bone_idx = 51
use_external_skeleton = true
external_skeleton = NodePath("../CharacterRig/GameRig/Skeleton3D")

[node name="AttackCast" type="RayCast3D" parent="RigPivot/Rig/RayAttachment"]
unique_name_in_owner = true
transform = Transform3D(5.7282858e-08, 4.888998e-08, 1, 0.99619454, 0.08715594, -6.1325935e-08, -0.08715591, 0.9961949, -4.371139e-08, -0.03, 0.08, 0.003)
target_position = Vector3(0, 1, 0)
collision_mask = 8
script = ExtResource("4_gwnis")

[node name="AreaAttack" parent="RigPivot" instance=ExtResource("6_fhl08")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 1)
collision_mask = 8

[connection signal="defeat" from="HealthComponent" to="." method="_on_health_component_defeat"]
[connection signal="heavy_attack" from="RigPivot/Rig" to="." method="_on_rig_heavy_attack"]

[editable path="RigPivot/Rig"]
[editable path="RigPivot/Rig/CharacterRig"]
