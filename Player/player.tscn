[gd_scene load_steps=8 format=3 uid="uid://j3m1lwvl5jua"]

[ext_resource type="Script" uid="uid://dbqotkyisa84w" path="res://Player/player.gd" id="1_l8h54"]
[ext_resource type="Script" uid="uid://cr4eajbcbd2hw" path="res://Player/smooth_camera_arm.gd" id="2_4ntmi"]
[ext_resource type="PackedScene" uid="uid://c6pdm8b840545" path="res://Player/health_component.tscn" id="2_k53q1"]
[ext_resource type="PackedScene" uid="uid://dhnqhg7al0gbr" path="res://Player/rig.tscn" id="3_btcbx"]
[ext_resource type="Script" uid="uid://c18p0xs4w5brd" path="res://Player/attack_cast.gd" id="4_gwnis"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_hvfyp"]

[sub_resource type="SeparationRayShape3D" id="SeparationRayShape3D_l8h54"]

[node name="Player" type="CharacterBody3D"]
collision_layer = 5
script = ExtResource("1_l8h54")

[node name="HealthComponent" parent="." instance=ExtResource("2_k53q1")]

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
shape = SubResource("CapsuleShape3D_hvfyp")

[node name="SmoothCameraArm" type="SpringArm3D" parent="." node_paths=PackedStringArray("target")]
transform = Transform3D(1, 0, 0, 0, 0.90630776, 0.42261827, 0, -0.42261827, 0.90630776, 0, 0, 0)
shape = SubResource("SeparationRayShape3D_l8h54")
spring_length = 4.0
script = ExtResource("2_4ntmi")
target = NodePath("../HorizontalPivot/VerticalPivot")

[node name="Camera3D" type="Camera3D" parent="SmoothCameraArm"]

[node name="HorizontalPivot" type="Node3D" parent="."]

[node name="VerticalPivot" type="Node3D" parent="HorizontalPivot"]

[node name="RigPivot" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -1, 0)

[node name="Rig" parent="RigPivot" instance=ExtResource("3_btcbx")]

[node name="Skeleton3D" parent="RigPivot/Rig/CharacterRig/GameRig" index="0"]
bones/0/position = Vector3(4.440892e-15, 0.90945333, -0.048173573)
bones/2/rotation = Quaternion(0.0061152144, -0.00028712107, 0.0032114803, 0.9999761)
bones/3/rotation = Quaternion(-0.08926261, -0.00028605576, 0.008524456, 0.9959716)
bones/4/rotation = Quaternion(0.27053025, 1.44351215e-08, 9.1828554e-08, 0.9627115)
bones/6/rotation = Quaternion(-0.16438194, -1.1758773e-07, -1.959584e-08, 0.98639685)
bones/7/position = Vector3(-2.7592373e-08, 0.9094532, -0.04817347)
bones/8/position = Vector3(-7.977766e-08, 0.9094533, -0.048173524)
bones/9/position = Vector3(0.13114367, 0.9756576, -0.035129093)
bones/9/rotation = Quaternion(0.9941834, 0.020281374, -0.031231951, 0.10105749)
bones/11/rotation = Quaternion(0.3963943, -0.0006955502, 0.00030044225, 0.9180801)
bones/13/rotation = Quaternion(-0.74137044, 0.011847707, 0.024362689, 0.6705491)
bones/15/position = Vector3(-0.1311437, 0.9756575, -0.0351291)
bones/15/rotation = Quaternion(0.9756703, -0.0053068404, 0.027651917, 0.21742812)
bones/17/rotation = Quaternion(0.4224595, 0.0031626867, -0.0014742248, 0.90637517)
bones/19/rotation = Quaternion(-0.67870456, -0.02814153, -0.0014069886, 0.7338708)
bones/21/position = Vector3(0.025128614, 1.4390296, 0.04690662)
bones/21/rotation = Quaternion(-0.4718323, -0.26672044, -0.41577533, 0.7303187)
bones/22/position = Vector3(0.19128916, 1.4778205, -0.010778725)
bones/22/rotation = Quaternion(0.022966996, -0.16376624, 0.975446, -0.14545922)
bones/23/rotation = Quaternion(6.35409e-08, -0.037786007, 3.5009208e-08, 0.99928594)
bones/24/rotation = Quaternion(0.3485408, -0.0377866, -0.021760268, 0.9362789)
bones/46/position = Vector3(-0.011363527, 1.4390296, 0.046906605)
bones/46/rotation = Quaternion(-0.47345382, 0.26172647, 0.4128875, 0.7327106)
bones/47/position = Vector3(-0.17675628, 1.4780716, -0.012777135)
bones/47/rotation = Quaternion(-0.014875357, -0.14702284, 0.9759998, 0.1599608)
bones/48/rotation = Quaternion(1.0730459e-07, 0.054355513, 1.3324464e-07, 0.9985217)
bones/49/rotation = Quaternion(0.38875413, 0.054355975, 0.02806212, 0.91930854)
bones/71/position = Vector3(0.12719111, 1.359867, -0.024575112)
bones/71/rotation = Quaternion(2.0244354e-08, 0.5993639, 0.80047673, -4.58924e-08)
bones/72/position = Vector3(-0.113425955, 1.359867, -0.024575138)
bones/72/rotation = Quaternion(2.0244403e-08, 0.5993639, 0.80047673, -4.589233e-08)

[node name="RightHandBone" parent="RigPivot/Rig" index="2"]
transform = Transform3D(-0.96234363, -0.2707998, -0.023715938, 0.22263978, -0.8352323, 0.50281096, -0.15596941, 0.47859684, 0.86407083, -0.35057235, 1.0105467, 0.026114188)

[node name="LeftHandBone" parent="RigPivot/Rig" index="3"]
transform = Transform3D(-0.97051364, 0.23910752, 0.03052163, -0.20968924, -0.8999128, 0.3823449, 0.11888836, 0.36467084, 0.92351526, 0.34809947, 0.993547, -0.009933267)

[node name="RayAttachment" type="BoneAttachment3D" parent="RigPivot/Rig"]
transform = Transform3D(-0.96234363, -0.2707998, -0.023715938, 0.22263978, -0.8352323, 0.50281096, -0.15596941, 0.47859684, 0.86407083, -0.35057235, 1.0105467, 0.026114188)
bone_name = "DEF-hand.R"
bone_idx = 51
use_external_skeleton = true
external_skeleton = NodePath("../CharacterRig/GameRig/Skeleton3D")

[node name="AttackCast" type="RayCast3D" parent="RigPivot/Rig/RayAttachment"]
unique_name_in_owner = true
transform = Transform3D(5.7282858e-08, 4.888998e-08, 1, 0.99619454, 0.08715594, -6.1325935e-08, -0.08715591, 0.9961949, -4.371139e-08, -0.03, 0.08, 0.003)
target_position = Vector3(0, 1, 0)
collision_mask = 8
script = ExtResource("4_gwnis")

[connection signal="defeat" from="HealthComponent" to="." method="_on_health_component_defeat"]

[editable path="RigPivot/Rig"]
[editable path="RigPivot/Rig/CharacterRig"]
