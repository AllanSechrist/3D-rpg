[gd_scene load_steps=6 format=3 uid="uid://cyl2jftnsfseb"]

[ext_resource type="PackedScene" uid="uid://dhnqhg7al0gbr" path="res://Player/rig.tscn" id="1_3ih25"]
[ext_resource type="Script" uid="uid://dp2ugunagnlvd" path="res://Enemies/enemy.gd" id="1_bxkaj"]
[ext_resource type="PackedScene" uid="uid://c6pdm8b840545" path="res://Player/health_component.tscn" id="3_47qgu"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_bxkaj"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_47qgu"]

[node name="Enemy" type="CharacterBody3D"]
collision_layer = 9
script = ExtResource("1_bxkaj")

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
shape = SubResource("CapsuleShape3D_bxkaj")

[node name="RigPivot" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -1, 0)

[node name="Rig" parent="RigPivot" instance=ExtResource("1_3ih25")]

[node name="Skeleton3D" parent="RigPivot/Rig/CharacterRig/GameRig" index="0"]
bones/0/position = Vector3(8.434034e-15, 0.8950502, -0.048173543)
bones/2/rotation = Quaternion(-0.0031596127, -0.0004374403, 0.003215198, 0.99998975)
bones/3/rotation = Quaternion(-0.09765593, -0.00039521224, 0.008519308, 0.9951837)
bones/4/rotation = Quaternion(0.2782069, 1.4752162e-08, 9.3936e-08, 0.96052116)
bones/6/rotation = Quaternion(-0.15474999, -1.17773304e-07, -1.8447627e-08, 0.9879537)
bones/7/position = Vector3(-2.8320413e-08, 0.8950501, -0.048173457)
bones/8/position = Vector3(-5.2158597e-08, 0.8950501, -0.048173513)
bones/9/position = Vector3(0.13114366, 0.96125436, -0.035129093)
bones/9/rotation = Quaternion(0.9927811, 0.020992063, -0.030892964, 0.11397705)
bones/11/rotation = Quaternion(0.42564574, -0.00070066174, 0.00032973092, 0.9048896)
bones/13/rotation = Quaternion(-0.7539262, 0.011894064, 0.02441671, 0.6563975)
bones/15/position = Vector3(-0.1311437, 0.96125436, -0.035129108)
bones/15/rotation = Quaternion(0.9726135, -0.005891434, 0.027246134, 0.23075078)
bones/17/rotation = Quaternion(0.4493562, 0.0033217524, -0.0016709669, 0.89334506)
bones/19/rotation = Quaternion(-0.6904093, -0.028204352, -0.00057536573, 0.72286874)
bones/21/position = Vector3(0.025128616, 1.4253321, 0.04169864)
bones/21/rotation = Quaternion(-0.49622488, -0.25677127, -0.39791188, 0.72766453)
bones/22/position = Vector3(0.18808624, 1.4618535, -0.025762593)
bones/22/rotation = Quaternion(0.05377472, -0.15908867, 0.9742333, -0.15056083)
bones/23/rotation = Quaternion(1.0702615e-07, -0.012754543, 7.664047e-09, 0.99991876)
bones/24/rotation = Quaternion(0.291665, -0.012755231, -0.01771905, 0.95627135)
bones/46/position = Vector3(-0.011363526, 1.4253322, 0.041698616)
bones/46/rotation = Quaternion(-0.5174455, 0.213586, 0.36832488, 0.74227214)
bones/47/position = Vector3(-0.16532978, 1.4622141, -0.044166796)
bones/47/rotation = Quaternion(-0.08509177, -0.13512695, 0.97239727, 0.17012882)
bones/48/rotation = Quaternion(-6.233446e-08, 0.006835456, -1.3237079e-07, 0.99997663)
bones/49/rotation = Quaternion(0.32341096, 0.0068358365, 0.028844949, 0.94579417)
bones/71/position = Vector3(0.12719111, 1.34341, -0.026618823)
bones/71/rotation = Quaternion(1.9175056e-08, 0.61499065, 0.7885345, -4.6490474e-08)
bones/72/position = Vector3(-0.113425955, 1.34341, -0.02661885)
bones/72/rotation = Quaternion(1.9175106e-08, 0.61499065, 0.7885345, -4.649041e-08)

[node name="Knight_02" parent="RigPivot/Rig/CharacterRig/GameRig/Skeleton3D" index="1"]
visible = false

[node name="Villager_01" parent="RigPivot/Rig/CharacterRig/GameRig/Skeleton3D" index="2"]
visible = true

[node name="RightHandBone" parent="RigPivot/Rig" index="2"]
transform = Transform3D(-0.96234286, -0.27080315, -0.023713378, 0.24327302, -0.8968587, 0.36940953, -0.1213048, 0.3497297, 0.92896396, -0.33914667, 0.9787822, -0.037232492)

[node name="LeftHandBone" parent="RigPivot/Rig" index="3"]
transform = Transform3D(-0.9705132, 0.23910841, 0.030521182, -0.2230226, -0.93875325, 0.26268494, 0.09146207, 0.24813232, 0.9643986, 0.34489682, 0.9674102, -0.053957596)

[node name="HealthComponent" parent="." instance=ExtResource("3_47qgu")]

[node name="PlayerDetector" type="ShapeCast3D" parent="."]
shape = SubResource("CapsuleShape3D_47qgu")
target_position = Vector3(0, 0, 1)
collision_mask = 4

[connection signal="heavy_attack" from="RigPivot/Rig" to="." method="_on_rig_heavy_attack"]
[connection signal="defeat" from="HealthComponent" to="." method="death"]

[editable path="RigPivot/Rig"]
[editable path="RigPivot/Rig/CharacterRig"]
