[gd_scene load_steps=7 format=3 uid="uid://cyl2jftnsfseb"]

[ext_resource type="PackedScene" uid="uid://dhnqhg7al0gbr" path="res://Player/rig.tscn" id="1_3ih25"]
[ext_resource type="Script" uid="uid://dp2ugunagnlvd" path="res://Enemies/enemy.gd" id="1_bxkaj"]
[ext_resource type="PackedScene" uid="uid://c6pdm8b840545" path="res://Player/health_component.tscn" id="3_47qgu"]
[ext_resource type="PackedScene" uid="uid://c43n45klq0hda" path="res://Player/area_attack.tscn" id="3_572h1"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_bxkaj"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_47qgu"]

[node name="Enemy" type="CharacterBody3D"]
collision_layer = 9
script = ExtResource("1_bxkaj")

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
shape = SubResource("CapsuleShape3D_bxkaj")

[node name="RigPivot" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -1, 0)

[node name="Rig" parent="RigPivot" instance=ExtResource("1_3ih25")]

[node name="Skeleton3D" parent="RigPivot/Rig/CharacterRig/GameRig" index="0"]
bones/0/position = Vector3(1.3472088e-14, 0.89836687, -0.04817352)
bones/2/rotation = Quaternion(-0.0010113565, -0.0004026189, 0.0032145118, 0.99999434)
bones/3/rotation = Quaternion(-0.09573154, -0.0003702017, 0.00852051, 0.9953707)
bones/4/rotation = Quaternion(0.27641252, 1.532298e-08, 9.1205955e-08, 0.9610391)
bones/6/rotation = Quaternion(-0.15698284, -1.17733286e-07, -1.8701133e-08, 0.98760134)
bones/7/position = Vector3(-1.3470904e-08, 0.8983667, -0.04817345)
bones/8/position = Vector3(-8.5660275e-08, 0.89836675, -0.048173502)
bones/9/position = Vector3(0.13114367, 0.9645709, -0.035129096)
bones/9/rotation = Quaternion(0.99309707, 0.020834945, -0.030966278, 0.11119906)
bones/11/rotation = Quaternion(0.4192967, -0.00070043054, 0.00032364335, 0.90784895)
bones/13/rotation = Quaternion(-0.7511882, 0.011884201, 0.02440205, 0.65952975)
bones/15/position = Vector3(-0.1311437, 0.96457106, -0.035129108)
bones/15/rotation = Quaternion(0.9733156, -0.005759858, 0.027337655, 0.22776368)
bones/17/rotation = Quaternion(0.44335493, 0.0032863126, -0.0016255893, 0.8963387)
bones/19/rotation = Quaternion(-0.68779474, -0.028190505, -0.0007630137, 0.72535723)
bones/21/position = Vector3(0.025128616, 1.4285121, 0.042904858)
bones/21/rotation = Quaternion(-0.4905873, -0.25912827, -0.40202, 0.72839314)
bones/22/position = Vector3(0.18886355, 1.4656246, -0.02231735)
bones/22/rotation = Quaternion(0.046697807, -0.16017793, 0.97459817, -0.14940144)
bones/23/rotation = Quaternion(4.3668713e-08, -0.01853726, 8.886513e-08, 0.9998282)
bones/24/rotation = Quaternion(0.3049196, -0.018537886, -0.018738654, 0.95201325)
bones/46/position = Vector3(-0.011363526, 1.4285121, 0.042904843)
bones/46/rotation = Quaternion(-0.507321, 0.22488078, 0.37868613, 0.7407098)
bones/47/position = Vector3(-0.16830653, 1.4661139, -0.037066583)
bones/47/rotation = Quaternion(-0.06894455, -0.13793147, 0.97367525, 0.16786335)
bones/48/rotation = Quaternion(1.00381996e-07, 0.017858682, 1.151931e-07, 0.9998406)
bones/49/rotation = Quaternion(0.33866906, 0.017858962, 0.028995799, 0.94028914)
bones/71/position = Vector3(0.12719111, 1.3472264, -0.026153047)
bones/71/rotation = Quaternion(1.9421476e-08, 0.61140025, 0.7913216, -4.635714e-08)
bones/72/position = Vector3(-0.113425955, 1.3472264, -0.02615307)
bones/72/rotation = Quaternion(1.9421535e-08, 0.61140025, 0.7913216, -4.635708e-08)

[node name="Knight_02" parent="RigPivot/Rig/CharacterRig/GameRig/Skeleton3D" index="1"]
visible = false

[node name="Villager_01" parent="RigPivot/Rig/CharacterRig/GameRig/Skeleton3D" index="2"]
visible = true

[node name="RightHandBone" parent="RigPivot/Rig" index="2"]
transform = Transform3D(-0.9623438, -0.27079862, -0.023717297, 0.23895957, -0.88432527, 0.401083, -0.12958655, 0.3803124, 0.91573435, -0.34212235, 0.98593426, -0.022540025)

[node name="LeftHandBone" parent="RigPivot/Rig" index="3"]
transform = Transform3D(-0.97051376, 0.23910731, 0.03052199, -0.2202494, -0.93109035, 0.2907941, 0.09794974, 0.2754971, 0.95629853, 0.34567383, 0.97320426, -0.04368776)

[node name="PlayerDetector" type="ShapeCast3D" parent="RigPivot/Rig"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0)
shape = SubResource("CapsuleShape3D_47qgu")
target_position = Vector3(0, 0, 1)
collision_mask = 4

[node name="AreaAttack" parent="RigPivot/Rig" instance=ExtResource("3_572h1")]
target_position = Vector3(0, 1, 1)
collision_mask = 4

[node name="HealthComponent" parent="." instance=ExtResource("3_47qgu")]

[connection signal="heavy_attack" from="RigPivot/Rig" to="." method="_on_rig_heavy_attack"]
[connection signal="defeat" from="HealthComponent" to="." method="death"]

[editable path="RigPivot/Rig"]
[editable path="RigPivot/Rig/CharacterRig"]
