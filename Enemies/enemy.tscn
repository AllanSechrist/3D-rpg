[gd_scene load_steps=7 format=3 uid="uid://cyl2jftnsfseb"]

[ext_resource type="PackedScene" uid="uid://dhnqhg7al0gbr" path="res://Player/rig.tscn" id="1_3ih25"]
[ext_resource type="Script" uid="uid://dp2ugunagnlvd" path="res://Enemies/enemy.gd" id="1_bxkaj"]
[ext_resource type="PackedScene" uid="uid://c6pdm8b840545" path="res://Player/health_component.tscn" id="3_47qgu"]
[ext_resource type="PackedScene" uid="uid://c43n45klq0hda" path="res://Player/area_attack.tscn" id="3_572h1"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_bxkaj"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_47qgu"]

[node name="Enemy" type="CharacterBody3D"]
collision_layer = 9
script = ExtResource("1_bxkaj")

[node name="HealthComponent" parent="." node_paths=PackedStringArray("body") instance=ExtResource("3_47qgu")]
body = NodePath("..")

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
shape = SubResource("CapsuleShape3D_bxkaj")

[node name="RigPivot" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -1, 0)

[node name="Rig" parent="RigPivot" instance=ExtResource("1_3ih25")]

[node name="Skeleton3D" parent="RigPivot/Rig/CharacterRig/GameRig" index="0"]
bones/0/position = Vector3(4.1993073e-15, 0.89594436, -0.04817355)
bones/2/rotation = Quaternion(-0.0025805908, -0.0004280557, 0.0032150159, 0.9999915)
bones/3/rotation = Quaternion(-0.09715215, -0.00038866568, 0.008519627, 0.99523306)
bones/4/rotation = Quaternion(0.27771837, 1.5004353e-08, 9.285946e-08, 0.9606626)
bones/6/rotation = Quaternion(-0.15535198, -1.1779022e-07, -1.833514e-08, 0.9878592)
bones/7/position = Vector3(-2.3553476e-08, 0.89594424, -0.048173454)
bones/8/position = Vector3(-3.840197e-08, 0.89594424, -0.048173517)
bones/9/position = Vector3(0.13114364, 0.9621485, -0.035129096)
bones/9/rotation = Quaternion(0.9928677, 0.020949261, -0.030912915, 0.11322201)
bones/11/rotation = Quaternion(0.42392397, -0.00070063566, 0.00032810177, 0.9056975)
bones/13/rotation = Quaternion(-0.7531901, 0.011891382, 0.024412706, 0.6572423)
bones/15/position = Vector3(-0.13114369, 0.9621485, -0.035129108)
bones/15/rotation = Quaternion(0.97281265, -0.0058543077, 0.027271988, 0.22990806)
bones/17/rotation = Quaternion(0.4477447, 0.0033122378, -0.0016587158, 0.8941538)
bones/19/rotation = Quaternion(-0.6897132, -0.028200684, -0.0006254907, 0.7235331)
bones/21/position = Vector3(0.025128616, 1.4261923, 0.042024758)
bones/21/rotation = Quaternion(-0.49468875, -0.2574169, -0.39903075, 0.7278696)
bones/22/position = Vector3(0.18830009, 1.4628855, -0.0248246)
bones/22/rotation = Quaternion(0.051848236, -0.15938605, 0.9743378, -0.15024595)
bones/23/rotation = Quaternion(6.0787414e-08, -0.014330274, 3.6180126e-08, 0.99989736)
bones/24/rotation = Quaternion(0.2952833, -0.014330973, -0.018001273, 0.95513266)
bones/46/position = Vector3(-0.011363526, 1.4261924, 0.042024735)
bones/46/rotation = Quaternion(-0.51469123, 0.21667364, 0.37115335, 0.7418832)
bones/47/position = Vector3(-0.16615832, 1.4632893, -0.042240757)
bones/47/rotation = Quaternion(-0.080696024, -0.13589448, 0.9727718, 0.1695164)
bones/48/rotation = Quaternion(-2.9299033e-08, 0.0098411, -5.6428892e-08, 0.9999516)
bones/49/rotation = Quaternion(0.32757774, 0.0098416135, 0.028903048, 0.94433075)
bones/71/position = Vector3(0.12719111, 1.3444504, -0.026492283)
bones/71/rotation = Quaternion(1.9241623e-08, 0.6140214, 0.7892894, -4.6454694e-08)
bones/72/position = Vector3(-0.113425955, 1.3444504, -0.026492309)
bones/72/rotation = Quaternion(1.924349e-08, 0.61399525, 0.7893098, -4.6453625e-08)

[node name="Knight_02" parent="RigPivot/Rig/CharacterRig/GameRig/Skeleton3D" index="1"]
visible = false

[node name="Villager_01" parent="RigPivot/Rig/CharacterRig/GameRig/Skeleton3D" index="2"]
visible = true

[node name="RightHandBone" parent="RigPivot/Rig" index="2"]
transform = Transform3D(-0.9623421, -0.27080506, -0.023711741, 0.24212964, -0.89354616, 0.37808564, -0.12357505, 0.35810655, 0.92546666, -0.33997568, 0.9807182, -0.033226375)

[node name="LeftHandBone" parent="RigPivot/Rig" index="3"]
transform = Transform3D(-0.9705131, 0.2391088, 0.030520815, -0.22228646, -0.9367441, 0.27036887, 0.09323782, 0.25561222, 0.96227276, 0.34511077, 0.9689738, -0.051153835)

[node name="PlayerDetector" type="ShapeCast3D" parent="RigPivot/Rig"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0)
shape = SubResource("CapsuleShape3D_47qgu")
target_position = Vector3(0, 0, 1)
collision_mask = 4

[node name="AreaAttack" parent="RigPivot/Rig" instance=ExtResource("3_572h1")]
target_position = Vector3(0, 1, 1)
collision_mask = 4

[connection signal="defeat" from="HealthComponent" to="." method="death"]
[connection signal="heavy_attack" from="RigPivot/Rig" to="." method="_on_rig_heavy_attack"]

[editable path="RigPivot/Rig"]
[editable path="RigPivot/Rig/CharacterRig"]
