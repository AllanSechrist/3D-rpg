[gd_scene load_steps=7 format=3 uid="uid://cyl2jftnsfseb"]

[ext_resource type="PackedScene" uid="uid://dhnqhg7al0gbr" path="res://Player/rig.tscn" id="1_3ih25"]
[ext_resource type="Script" uid="uid://dp2ugunagnlvd" path="res://Enemies/enemy.gd" id="1_bxkaj"]
[ext_resource type="PackedScene" uid="uid://c6pdm8b840545" path="res://Player/health_component.tscn" id="3_47qgu"]
[ext_resource type="PackedScene" uid="uid://c43n45klq0hda" path="res://Player/area_attack.tscn" id="3_572h1"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_bxkaj"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_47qgu"]

[node name="Enemy" type="CharacterBody3D"]
collision_layer = 9
script = ExtResource("1_bxkaj")

[node name="HealthComponent" parent="." node_paths=PackedStringArray("body") instance=ExtResource("3_47qgu")]
body = NodePath("..")

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
shape = SubResource("CapsuleShape3D_bxkaj")

[node name="RigPivot" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -1, 0)

[node name="Rig" parent="RigPivot" instance=ExtResource("1_3ih25")]

[node name="Skeleton3D" parent="RigPivot/Rig/CharacterRig/GameRig" index="0"]
bones/0/position = Vector3(7.574668e-15, 0.8935495, -0.048173543)
bones/2/rotation = Quaternion(-0.004088574, -0.00045249533, 0.0032155265, 0.99998647)
bones/3/rotation = Quaternion(-0.09861122, -0.00040762778, 0.008518647, 0.99508953)
bones/4/rotation = Quaternion(0.27898213, 1.4323611e-08, 9.573167e-08, 0.9602964)
bones/6/rotation = Quaternion(-0.15373975, -1.1802295e-07, -1.6837454e-08, 0.9881114)
bones/7/position = Vector3(-3.6808135e-08, 0.8935494, -0.048173454)
bones/8/position = Vector3(-6.451008e-08, 0.8935494, -0.048173506)
bones/9/position = Vector3(0.13114364, 0.9597537, -0.0351291)
bones/9/rotation = Quaternion(0.99263686, 0.021062793, -0.030860035, 0.11522186)
bones/11/rotation = Quaternion(0.42854044, -0.00070065795, 0.0003324518, 0.90352225)
bones/13/rotation = Quaternion(-0.7551856, 0.011898705, 0.024423618, 0.6549478)
bones/15/position = Vector3(-0.13114369, 0.9597537, -0.035129108)
bones/15/rotation = Quaternion(0.9722902, -0.0059514483, 0.02720429, 0.23211284)
bones/17/rotation = Quaternion(0.45206422, 0.0033377707, -0.0016916754, 0.89197755)
bones/19/rotation = Quaternion(-0.6915999, -0.028210606, -0.00048940955, 0.7217295)
bones/21/position = Vector3(0.025128614, 1.4238516, 0.04113759)
bones/21/rotation = Quaternion(-0.49881995, -0.25567472, -0.396023, 0.72730666)
bones/22/position = Vector3(0.18772139, 1.4601018, -0.02734553)
bones/22/rotation = Quaternion(0.05702529, -0.1585854, 0.97404844, -0.1510908)
bones/23/rotation = Quaternion(1.04275394e-07, -0.010093056, 3.8561588e-08, 0.99994916)
bones/24/rotation = Quaternion(0.28554252, -0.010093652, -0.017234623, 0.95815796)
bones/46/position = Vector3(-0.011363526, 1.4238516, 0.041137572)
bones/46/rotation = Quaternion(-0.5220914, 0.20835336, 0.36353928, 0.74286526)
bones/47/position = Vector3(-0.16389886, 1.4603753, -0.04740379)
bones/47/rotation = Quaternion(-0.09250894, -0.13382494, 0.9717197, 0.17115495)
bones/48/rotation = Quaternion(-5.6477603e-08, 0.0017552383, -8.80453e-08, 0.9999985)
bones/49/rotation = Quaternion(0.31635854, 0.0017555722, 0.028715707, 0.94820344)
bones/71/position = Vector3(0.12719111, 1.3417323, -0.026822044)
bones/71/rotation = Quaternion(1.9060595e-08, 0.6166556, 0.7872332, -4.6551545e-08)
bones/72/position = Vector3(-0.113425955, 1.3417323, -0.02682207)
bones/72/rotation = Quaternion(1.9060641e-08, 0.6166556, 0.7872332, -4.6551474e-08)

[node name="Knight_02" parent="RigPivot/Rig/CharacterRig/GameRig/Skeleton3D" index="1"]
visible = false

[node name="Villager_01" parent="RigPivot/Rig/CharacterRig/GameRig/Skeleton3D" index="2"]
visible = true

[node name="RightHandBone" parent="RigPivot/Rig" index="2"]
transform = Transform3D(-0.9623438, -0.27079794, -0.02371781, 0.24515367, -0.9022758, 0.35468063, -0.1174468, 0.33551046, 0.9346865, -0.33771446, 0.9755336, -0.04400115)

[node name="LeftHandBone" parent="RigPivot/Rig" index="3"]
transform = Transform3D(-0.97051364, 0.23910697, 0.03052212, -0.22423315, -0.942012, 0.24966618, 0.08844915, 0.23546028, 0.9678507, 0.3445316, 0.9647943, -0.058702014)

[node name="PlayerDetector" type="ShapeCast3D" parent="RigPivot/Rig"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0)
shape = SubResource("CapsuleShape3D_47qgu")
target_position = Vector3(0, 0, 1)
collision_mask = 4

[node name="AreaAttack" parent="RigPivot/Rig" instance=ExtResource("3_572h1")]
target_position = Vector3(0, 1, 1)
collision_mask = 4

[connection signal="defeat" from="HealthComponent" to="." method="death"]
[connection signal="heavy_attack" from="RigPivot/Rig" to="." method="_on_rig_heavy_attack"]

[editable path="RigPivot/Rig"]
[editable path="RigPivot/Rig/CharacterRig"]
